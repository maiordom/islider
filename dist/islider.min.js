"use strict";!function(t,i,e){function s(t,i){return this.element=t,this.properties=i||{},this.freeRide=function(){},this.setPath=function(){},this.options={},this.events={},this.path=null,this.box=null,this.slider=null,this.leftElement=null,this.rightElement=null,this.elementWidth=null,this.handleMetric=null,this.metricType=null,this.coordType=null,this["interface"]=null,this.leftSlider=null,this.rightSlider=null,this.activeSlider=null,this.isVertical=!1,this.isCrossing=!1,this.init(),this["interface"]}function n(t,i){this.element=t,this.properties=i,this.moveHandler=function(){},this.setCoord=function(){},this.events={},this.position=null,this.range=null,this.xMin=null,this.xMax=null,this.sliderOffset=null,this.mouseOffset=null,this.tmpCoord=null,this.scaleValToCoord=function(){},this.scaleCoordToVal=function(){},this.init()}var o={getPageCoords:function(t){if(t.originalEvent.changedTouches||t.originalEventtargetTouches){var i=t.originalEvent.changedTouches[0]||t.originalEventtargetTouches[0];return{left:i.pageX,top:i.pageY}}return{left:t.pageX,top:t.pageY}}},h="islider",r={islider:""+h,left:h+"__left",right:h+"__right",slider:h+"__slider",path:h+"__path",box:h+"__box",hover:h+"_hover",active:h+"_active",focus:h+"_focus",hasAnim:h+"_has_anim",orientation:"horizontal",range:"min",step:1,generate:!0,value:0,domain:[0,1],values:[0,0],onSlide:function(t,i){}};s.prototype={on:function(t,i){return this.events[t]=i,this["interface"]},trigger:function(t,i){this.events[t]&&this.events[t].apply(null,i)},init:function(){this["interface"]=this.getInterface(),this.extend(),this.generate(),this.cacheNodes(),this.checkIsVertical(),this.setVars(),this.setSetPathHandler(),this.setSliders(),this.isRangeSingle(),this.setInitialData(),this.bindEvents()},bindEvents:function(){this.element.on("mousedown",this.onElementClick.bind(this)),this.leftSlider.on("move",this.onLeftMove.bind(this)),this.leftSlider.on("stopSlide",this.onStopSlide.bind(this)),this.rightSlider.on("move",this.onRightMove.bind(this)),this.rightSlider.on("stopSlide",this.onStopSlide.bind(this)),this.slider.on("mousedown",this.onStartSlide.bind(this)),this.slider.on("touchstart",this.onStartSlide.bind(this)),this.slider.on("mouseenter",this.onHoverElement.bind(this)),this.slider.on("mouseleave",this.onUnhoverElement.bind(this))},onElementClick:function(i){t(i.target).hasClass(this.options.slider)||this.freeRide(i)},getFreeRideData:function(t){var i=this.getWidth(),e=this.element.offset(),s=o.getPageCoords(t);return s="horizontal"===this.options.orientation?s.left-e.left:s.top-e.top,{width:i,mouseCoord:s}},rangeFreeRide:function(t){var i=!1,e=void 0,s=void 0;this.cacheParams();var n=this.getFreeRideData(t),o=n.width,h=n.mouseCoord,r=this.getLeft(),l=this.getRight();r>h?(e=h-.5*this.handleMetric,e=0>e?0:e,this.onLeftMove(e),i=!0):h>l+this.handleMetric?(e=h-1.5*this.handleMetric,e=e>o?o:e,this.onRightMove(e),i=!0):(s=this.getDistance(),r+this.handleMetric<h&&h<r+this.handleMetric+s/2?(e=h-.5*this.handleMetric,e>l&&(e=l),this.onLeftMove(e),i=!0):(e=h-1.5*this.handleMetric,r>e&&(e=r),this.onRightMove(e),i=!0)),i&&this.triggerStopSlide()},minMaxFreeRide:function(t){var i=this.getFreeRideData(t),e=i.mouseCoord-.5*this.handleMetric;e=0>e?0:e>i.width?i.width:e,this.onLeftMove(e),this.triggerStopSlide()},onHoverElement:function(i){t(i.target).addClass(this.options.hover)},onUnhoverElement:function(i){t(i.target).removeClass(this.options.hover)},onStopSlide:function(){this.element.addClass(this.options.hasAnim),this.activeSlider.element.removeClass(this.options.active),this.triggerStopSlide()},onStartSlide:function(t){return t.target===this.leftSlider.element[0]?this.activeSlider=this.leftSlider:t.target===this.rightSlider.element[0]&&(this.activeSlider=this.rightSlider),this.activeSlider.startSlide(t),this.element.removeClass(this.options.hasAnim),this.activeSlider.element.addClass(this.options.active),this.cacheParams(),!1},triggerStopSlide:function(){this.element.trigger("islider.stop-slide")},extend:function(){t.extend(!0,this.options,r,this.properties)},cacheParams:function(){this.leftSlider.position=this.getLeft(!0),this.rightSlider.position=this.getRight(!0),this.elementWidth=this.getWidth(!0)},cacheNodes:function(){this.element.addClass(this.options.islider),this.slider=this.element.find("."+this.options.slider),this.leftElement=this.element.find("."+this.options.left),this.rightElement=this.element.find("."+this.options.right),this.path=this.element.find("."+this.options.path),this.box=this.element.find("."+this.options.box),setTimeout(function(){this.element.addClass(this.options.hasAnim)}.bind(this),10)},setVars:function(){this.isVertical="vertical"===this.options.orientation,this.metricType=this.isVertical?"height":"width",this.coordType=this.isVertical?"top":"left",this.handleMetric=this.leftElement[this.metricType]()||this.rightElement[this.metricType](),this.elementWidth=this.getWidth(!0),this.isVertical&&this.box.height(this.elementWidth)},setSetPathHandler:function(){this.setPath=this.options.range===!0?this.setRangePath:"min"===this.options.range?this.setMinPath:this.setMaxPath},getWidth:function(t){if(!t)return this.elementWidth;var i=this.isVertical?this.element[0].offsetHeight:this.element[0].offsetWidth;return i-this.handleMetric*(this.options.range===!0?2:1)},checkIsVertical:function(){"vertical"===this.options.orientation?this.element.addClass("islider_vertical"):this.element.addClass("islider_horizontal")},isRangeSingle:function(){if("min"===this.options.range)this.options.values[1]=this.options.value,this.element.addClass("islider_min"),this.freeRide=this.minMaxFreeRide;else if("max"===this.options.range){this.element.addClass("islider_max");var t="horizontal"===this.options.orientation?"right":"bottom";this.path[0].style[t]=0,this.options.values[0]=this.options.value,this.options.values[1]=this.options.domain[1],this.freeRide=this.minMaxFreeRide}else this.element.addClass("islider_range"),this.freeRide=this.rangeFreeRide},generate:function(){if(this.options.generate){var i=t("<div>").addClass(this.options.box).appendTo(this.element);t("<div>").addClass(this.options.left).addClass(this.options.slider).appendTo(i),t("<div>").addClass(this.options.right).addClass(this.options.slider).appendTo(i),t("<div>").addClass(this.options.path).appendTo(i)}},setSliders:function(){var t={orientation:this.options.orientation,domain:this.options.domain,step:this.options.step,getWidth:this.getWidth.bind(this)};this.leftSlider=new n(this.leftElement,t),this.rightSlider=new n(this.rightElement,t)},setInitialData:function(){this.options.range===!0?(this.leftSlider.setValue(this.options.values[0]),this.rightSlider.setValue(this.options.values[1])):this.leftSlider.setValue(this.options.value),this.cacheParams(),this.setPath(this.getLeft(),this.getDistance()),this.options.range!==!0&&this.rightElement.hide()},getLeft:function(t){return t?this.leftSlider.getCoord():this.leftSlider.position},getRight:function(t){return t?this.rightSlider.getCoord():this.rightSlider.position},getDistance:function(){return this.getRight()-this.getLeft()},isLeftCrossing:function(t){return t>=this.getRight()},isRightCrossing:function(t){return t<=this.getLeft()},onLeftMove:function(t){this.leftMoveHandler(t),this.options.onSlide(this.options.values[0],this.options.values,"left")},onRightMove:function(t){this.rightMoveHandler(t),this.options.onSlide(this.options.values[1],this.options.values,"right")},leftMoveHandler:function(t){var i=this.getRight()-t;this.options.values[0]=this.leftSlider.getValue(t),this.leftSlider.setCoord(t),this.setPath(t,0>i?0:i),this.options.range===!0&&(this.isLeftCrossing(t)?(this.isCrossing=!0,this.rightSlider.setCoord(t),this.options.values[1]=this.options.values[0]):this.isCrossing&&(this.isCrossing=!1,this.rightSlider.setCoord(this.rightSlider.position),this.options.values[1]=this.rightSlider.getValue()))},rightMoveHandler:function(t){this.options.values[1]=this.rightSlider.getValue(t),this.rightSlider.setCoord(t),this.options.range===!0?this.isRightCrossing(t)?(this.isCrossing=!0,this.leftSlider.setCoord(t),this.options.values[0]=this.options.values[1],this.setPath(t,0)):(this.setPath(this.getLeft(),t-this.getLeft()),this.isCrossing&&(this.leftSlider.setCoord(this.leftSlider.position),this.options.values[0]=this.leftSlider.getValue())):this.setPath(this.getLeft(),t-this.getLeft())},setRangePath:function(t,i){this.path[0].style[this.metricType]=i/this.getWidth()*100+"%",this.path[0].style[this.coordType]=t/this.getWidth()*100+"%"},setMaxPath:function(t){this.path[0].style[this.metricType]=100-t/this.getWidth()*100+"%"},setMinPath:function(t){this.path[0].style[this.metricType]=(t+this.handleMetric/2)/this.getWidth()*100+"%"},leftVal:function(t){return"number"!=typeof t?this.leftSlider.getValue():(this.cacheParams(),void this.leftMoveHandler(this.leftSlider.scaleValToCoord(t)))},rightVal:function(t){return"number"!=typeof t?this.rightSlider.getValue():(this.cacheParams(),void this.rightMoveHandler(this.rightSlider.scaleValToCoord(t)))},getInterface:function(){return{on:this.on.bind(this),getDist:this.getDistance.bind(this),reset:this.setInitialData.bind(this),leftVal:this.leftVal.bind(this),rightVal:this.rightVal.bind(this)}}},n.prototype={getCoord:function(t){var i=this;return this.properties.step>1?function(){return i.trimMouseValue(t())}:t},init:function(){this.cacheObjects(),this.reset()},cacheObjects:function(){var t="vertical"===this.properties.orientation;this.moveHandler=t?this.moveVerticalHandler:this.moveHorizontalHandler,this.setCoord=t?this.setY:this.setX,this.getCoord=this.getCoord(t?this.getY:this.getX)},reset:function(){this.range=[0,this.properties.getWidth()],this.setRange(this.range),this.setScale(this.range,this.properties.domain)},setRange:function(t){this.xMin=t[0],this.xMax=t[1]},setScale:function(t,i){this.scaleValToCoord=this.scale(i,t),this.scaleCoordToVal=this.scale(t,i)},on:function(t,i){this.events[t]=i},trigger:function(t,i){this.events[t]&&this.events[t].apply(null,i)},startSlide:function(t){this.reset(),this.setMouseOffset(t),this.addDocumentEventHandlers(),this.trigger("startSlide")},scale:function(t,i){var e=this.uninterpolateNumber(t[0],t[1]),s=this.interpolateNumber(i[0],i[1]);return function(t){return s(e(t))}},uninterpolateNumber:function(t,i){return i=i-(t=+t)?1/(i-t):0,function(e){return(e-t)*i}},interpolateNumber:function(t,i){return i-=t,function(e){return t+i*e}},addDocumentEventHandlers:function(){var i=this;t(document.body).on({"mousemove.slider touchmove.slider":function(){i.moveHandler.apply(i,arguments)},"mouseup.slider touchend.slider touchcancel.slider":function(){i.removeDocumentEventHandlers.apply(i,arguments)}}),document.body.onselectstart=this.returnFalse,document.ondragstart=this.returnFalse},returnFalse:function(){return!1},trimMouseValue:function(t){var i=this.scaleCoordToVal(t),e=this.properties.step>0?this.properties.step:1,s=(i-this.range[0])%e,n=i-s;return 2*Math.abs(s)>=e&&(n+=s>0?e:-e),this.scaleValToCoord(n)},getPosision:function(t){var i=t+this.tmpCoord;return this.properties.step>1&&(i=this.trimMouseValue(i)),this.xMin>i?i=this.xMin:i>this.xMax&&(i=this.xMax),i},moveVerticalHandler:function(t){var i=o.getPageCoords(t).top-this.mouseOffset.y-this.sliderOffset.top;this.trigger("move",[this.getPosision(i)])},moveHorizontalHandler:function(t){var i=o.getPageCoords(t).left-this.mouseOffset.x-this.sliderOffset.left;this.trigger("move",[this.getPosision(i)])},setValue:function(t){this.setCoord(this.scaleValToCoord(t))},getValue:function(t){return this.scaleCoordToVal("number"==typeof t?t:this.getCoord())},getX:function(){return this.element[0].offsetLeft-parseInt(this.element.css("marginLeft"),10)},getY:function(){return this.element[0].offsetTop-parseInt(this.element.css("marginTop"),10)},setX:function(t){this.element[0].style.left=parseInt(t,10)/this.properties.getWidth()*100+"%"},setY:function(t){this.element[0].style.top=parseInt(t,10)/this.properties.getWidth()*100+"%"},setMouseOffset:function(t){this.sliderOffset=this.element.offset(),this.tmpCoord=this.getCoord(),this.mouseOffset={x:o.getPageCoords(t).left-this.sliderOffset.left,y:o.getPageCoords(t).top-this.sliderOffset.top}},removeDocumentEventHandlers:function(){document.body.onselectstart=null,document.ondragstart=null,t(document.body).off("mousemove.slider mouseup.slider touchmove.slider"),this.trigger("stopSlide")}},t.fn.islider=function(i){var e=void 0,n=void 0;return t(this).each(function(){e=t(this),e.data("islider")?console.log("islider already init",this):(n=new s(e,i),e.data("islider",n))}),this}}(jQuery,window,void 0);